{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/admin/Desktop/sites/Coursa4/src/SignUp.js\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useState, useContext } from \"react\";\nimport { withRouter, Redirect } from \"react-router\";\nimport { Link } from 'react-router-dom';\nimport { AuthContext } from \"./Auth.js\";\nimport app from \"./base\";\nimport \"./SignUp.css\";\n\nconst SignUp = ({\n  history\n}) => {\n  _s();\n\n  const [firstname, setFirstname] = useState(\"\");\n  const [lastname, setLastname] = useState(\"\");\n  const [user, setUser] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const ref = app.firestore().collection(\"users\");\n\n  function addUserToDb(user) {\n    ref.doc(user.id).set(user).then(() => {\n      setUser(prev => [user, ...prev]);\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  const handleSignUp = useCallback(async event => {\n    event.preventDefault();\n    const {\n      firstname,\n      lastname,\n      email,\n      password\n    } = event.target.elements;\n\n    try {\n      await app.auth().createUserWithEmailAndPassword(email.value, password.value).then(userRecord => {\n        let uid = app.auth().currentUser.uid;\n        return app.firestore().collection('users').doc(uid).set({\n          user_uid: uid,\n          firstname: firstname.value,\n          lastname: lastname.value,\n          email: email.value\n        });\n      });\n      history.push(\"/list_projects\");\n    } catch (error) {\n      alert(error);\n    }\n  }, [history]);\n\n  const onSubmit = e => {\n    e.preventDefault();\n    ref.add({\n      email\n    }).then(() => {\n      setEmail('');\n    });\n  };\n\n  const {\n    currentUser\n  } = useContext(AuthContext);\n\n  if (currentUser) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"main\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"section-register\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          class: \"main-title\",\n          children: \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"main-form\",\n          children: [/*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSignUp,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"group\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                class: \"group-label\",\n                children: \"\\u0418\\u043C\\u044F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                class: \"group-form\",\n                type: \"text\",\n                placeholder: \"John\",\n                name: \"firstname\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"group\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                class: \"group-label\",\n                children: \"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u0435\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                class: \"group-form\",\n                type: \"text\",\n                placeholder: \"Mask\",\n                name: \"lastname\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"group\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                class: \"group-label\",\n                children: \"Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                class: \"group-form\",\n                type: \"email\",\n                placeholder: \"example@gmail.com\",\n                name: \"email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"group\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                class: \"group-label\",\n                children: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                class: \"group-form\",\n                type: \"password\",\n                placeholder: \"************\",\n                name: \"password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              class: \"button-submit\",\n              children: \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            class: \"main-form-subtitle\",\n            children: \"\\u0423 \\u0432\\u0430\\u0441 \\u0435\\u0441\\u0442\\u044C \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/login\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              class: \"main-form-register\",\n              children: \"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 31\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(SignUp, \"hy1oJjX7KOQvsumlfi8HJBP/vv8=\");\n\n_c = SignUp;\nexport default _c2 = withRouter(SignUp);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"SignUp\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/admin/Desktop/sites/Coursa4/src/SignUp.js"],"names":["React","useCallback","useState","useContext","withRouter","Redirect","Link","AuthContext","app","SignUp","history","firstname","setFirstname","lastname","setLastname","user","setUser","email","setEmail","ref","firestore","collection","addUserToDb","doc","id","set","then","prev","catch","err","console","error","handleSignUp","event","preventDefault","password","target","elements","auth","createUserWithEmailAndPassword","value","userRecord","uid","currentUser","user_uid","push","alert","onSubmit","e","add"],"mappings":"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","sourcesContent":["import React, { useCallback, useState, useContext } from \"react\"; \nimport { withRouter, Redirect } from \"react-router\";\nimport { Link } from 'react-router-dom';\nimport { AuthContext } from \"./Auth.js\";\nimport app from \"./base\";\nimport \"./SignUp.css\";\n\nconst SignUp = ({ history }) => {\n\n  const [firstname, setFirstname] = useState(\"\");\n  const [lastname, setLastname] = useState(\"\");\n  const [user, setUser] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const ref = app.firestore().collection(\"users\");\n  \n\n  function addUserToDb(user) {\n    ref\n      .doc(user.id)\n      .set(user)\n      .then(() => {\n        setUser((prev) => [user, ...prev]);\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n\n      \n      \n  }\n\n  const handleSignUp = useCallback(async event => {\n    event.preventDefault();\n    const { firstname, lastname, email, password } = event.target.elements;    \n    try {\n      await app\n        .auth()\n        .createUserWithEmailAndPassword(email.value, password.value).then((userRecord) => {\n  \n          let uid = app.auth().currentUser.uid;\n    \n          return app.firestore().collection('users').doc(uid)\n            .set({\n              user_uid: uid,\n              firstname: firstname.value,\n              lastname: lastname.value,\n              email: email.value\n            })\n    \n        })\n      history.push(\"/list_projects\");\n\n\n\n    } catch (error) {\n      alert(error);\n    }\n    \n  }, [history]);\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n    ref.add({email})\n    .then(() => {\n      setEmail('')    \n    })\n  }\n\n  const { currentUser } = useContext(AuthContext);\n\n  if (currentUser) {\n    return <Redirect to=\"/\" />;\n  }\n\n  return (\n    <>\n      <main>\n        <div class=\"section-register\">\n          <h2 class=\"main-title\">Регистрация</h2>\n          <hr />\n          <div class=\"main-form\">\n            <form onSubmit={handleSignUp}>\n            <div class=\"group\">\n                <span class=\"group-label\">Имя</span>\n                <input class=\"group-form\" type=\"text\" placeholder=\"John\" name=\"firstname\" />\n              </div>\n              <div class=\"group\">\n                <span class=\"group-label\">Фамилие</span>\n                <input class=\"group-form\" type=\"text\" placeholder=\"Mask\" name=\"lastname\" />\n              </div>\n              <div class=\"group\">\n                <span class=\"group-label\">Email</span>\n                <input class=\"group-form\" type=\"email\" placeholder=\"example@gmail.com\" name=\"email\" />\n              </div>\n              <div class=\"group\">\n                <span class=\"group-label\">Пароль</span>\n                <input class=\"group-form\" type=\"password\" placeholder=\"************\" name=\"password\" />\n              </div>\n              <button type=\"submit\" class=\"button-submit\">Регистрация</button>\n            </form>\n            \n            <hr />\n            <h2 class=\"main-form-subtitle\">У вас есть аккаунт?</h2>\n            <Link to=\"/login\"><button class=\"main-form-register\">Авторизоваться</button></Link>\n          </div>\n        </div>\n      </main>\n    </>\n  );\n};\n\n\nexport default withRouter(SignUp);\n"]},"metadata":{},"sourceType":"module"}